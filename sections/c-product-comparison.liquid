{% schema %}
{
  "name": "Comparación de Productos",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Título",
      "default": "You made a baby,\nwe made a diaper."
    },
    {
      "type": "color",
      "id": "table_bg_color",
      "label": "Color de fondo tabla izquierda",
      "default": "#E6E6FA"
    },
    {
      "type": "color",
      "id": "highlight_bg_color",
      "label": "Color de fondo columna destacada",
      "default": "#FFFF00"
    },
    {
      "type": "image_picker",
      "id": "comparison_image",
      "label": "Imagen de comparación"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Link del botón"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Texto del botón",
      "default": "SHOP FREESTYLE DIAPERS"
    }
  ],
  "blocks": [
    {
      "type": "comparison_row",
      "name": "Fila de comparación",
      "settings": [
        {
          "type": "text",
          "id": "feature",
          "label": "Característica",
          "default": "CLEAN INGREDIENTS"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Comparación de Productos",
      "blocks": [
        {
          "type": "comparison_row"
        },
        {
          "type": "comparison_row"
        },
        {
          "type": "comparison_row"
        },
        {
          "type": "comparison_row"
        },
        {
          "type": "comparison_row"
        }
      ]
    }
  ]
}
{% endschema %}

<div class="mx-auto px-4 py-12">
  <!-- Título -->
  <h2 class="text-4xl md:text-5xl text-center mb-12 text-gray-600 whitespace-pre-line">
    {{ section.settings.title }}
  </h2>

  <div class="flex flex-col md:flex-row gap-8 items-center justify-center">
    <div class="w-full md:w-1/2">
      <table class="w-full text-lg h-[500px] overflow-hidden rounded-3xl">
        <thead>
          <tr>
            <th class="p-6  text-left w-1/3 bg-core_light rounded-tl-3xl"></th>
            <th class="p-6 text-center w-1/3 font-bold text-xl" style="background-color: {{ section.settings.highlight_bg_color }}">
              <img 
                src="https://cdn.shopify.com/s/files/1/0616/2835/0723/files/logo2.png?v=1649838246"
                alt="Freestyle"
                class="h-12 mx-auto"
              >
            </th>
            <th class="p-6 px-12 text-center w-1/3 text-gray-600 text-sm bg-core_light rounded-tr-3xl font-normal">
              REGULAR<br>DIAPERS
            </th>
          </tr>
        </thead>
        <tbody>
          {% for block in section.blocks %}
            {% if forloop.last %}
              <tr style="background-color: {{ section.settings.table_bg_color }}">
                <td class="p-6 md:px-14 border-t text-gray-600 font-medium rounded-bl-3xl text-end">{{ block.settings.feature }}</td>
                <td class="p-6 md:px-8 border-t text-center" style="background-color: {{ section.settings.highlight_bg_color }}">
                  <div class="bg-gray-200 w-8 h-8 rounded-full flex items-center justify-center mx-auto">
                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                  </div>
                </td>
                <td class="p-6 md:px-8 border-t text-center rounded-br-3xl">
                  <svg class="w-8 h-8 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </td>
              </tr>
            {% else %}
              <tr style="background-color: {{ section.settings.table_bg_color }}">
                <td class="p-6 md:px-14 border-t text-gray-600 font-medium text-end">{{ block.settings.feature }}</td>
                <td class="p-6 md:px-8 border-t text-center" style="background-color: {{ section.settings.highlight_bg_color }}">
                  <div class="bg-gray-200 w-8 h-8 rounded-full flex items-center justify-center mx-auto">
                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                  </div>
                </td>
                <td class="p-6 md:px-8 border-t text-center">
                  <svg class="w-8 h-8 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </td>
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Imagen/Video -->
    <div class="w-full md:w-1/2">
      {% if section.settings.comparison_image != blank %}
        <img 
          src="{{ section.settings.comparison_image | img_url: 'master' }}"
          alt="Comparison image"
          class="w-full h-auto rounded-lg shadow-lg"
        >
      {% endif %}
    </div>
  </div>

  <!-- Botón -->
  {% if section.settings.button_link != blank %}
    <div class="text-center mt-12">
      <a 
        href="{{ section.settings.button_link }}"
        class="inline-block px-8 py-4 text-white bg-green-400 rounded-full hover:bg-green-500 transition-colors duration-200"
      >
        {{ section.settings.button_text }}
      </a>
    </div>
  {% endif %}
</div>